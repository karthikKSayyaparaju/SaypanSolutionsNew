You can add login to your Next.js site with both:

“Continue with Google”

Email/password account creation

The easiest, production-safe way is NextAuth.js (Auth.js) with a database (recommended: Supabase or Postgres). Azure Static Web Apps supports this well as long as you deploy as a Next.js app (not purely static export).

Below is the cleanest approach.

Best option (recommended): NextAuth + Google + Email/Password (via Credentials)
What you’ll get

/login page with:

Google sign-in

Email + password sign up / sign in

Protected pages like /dashboard

Install
pnpm add next-auth bcrypt
pnpm add -D @types/bcrypt

1) Add NextAuth route (App Router)

Create:

src/app/api/auth/[...nextauth]/route.ts

import NextAuth from "next-auth";
import GoogleProvider from "next-auth/providers/google";
import CredentialsProvider from "next-auth/providers/credentials";
import bcrypt from "bcrypt";

// NOTE: This demo uses an in-memory user check.
// In production, replace with DB calls (Supabase/Postgres).
const users: { email: string; passwordHash: string }[] = [];

const handler = NextAuth({
  session: { strategy: "jwt" },
  providers: [
    GoogleProvider({
      clientId: process.env.GOOGLE_CLIENT_ID!,
      clientSecret: process.env.GOOGLE_CLIENT_SECRET!,
    }),
    CredentialsProvider({
      name: "Email & Password",
      credentials: {
        email: { label: "Email", type: "email" },
        password: { label: "Password", type: "password" },
        mode: { label: "mode", type: "text" },
      },
      async authorize(credentials) {
        const email = credentials?.email?.toLowerCase().trim();
        const password = credentials?.password ?? "";
        const mode = credentials?.mode ?? "login";

        if (!email || !password) return null;

        if (mode === "signup") {
          const exists = users.find(u => u.email === email);
          if (exists) return null;

          const passwordHash = await bcrypt.hash(password, 10);
          users.push({ email, passwordHash });
          return { id: email, email };
        }

        const user = users.find(u => u.email === email);
        if (!user) return null;

        const ok = await bcrypt.compare(password, user.passwordHash);
        if (!ok) return null;

        return { id: email, email };
      },
    }),
  ],
  pages: {
    signIn: "/login",
  },
});

export { handler as GET, handler as POST };


⚠️ Important: The users array above is NOT production-ready (it resets on deploy).
Use a real database (I’ll show the right way below).

2) Create the Login page

src/app/login/page.tsx

"use client";

import { signIn } from "next-auth/react";
import { useState } from "react";

export default function LoginPage() {
  const [email, setEmail] = useState("");
  const [password, setPassword] = useState("");
  const [mode, setMode] = useState<"login" | "signup">("login");

  return (
    <div className="mx-auto max-w-md px-6 py-16">
      <h1 className="text-3xl font-bold text-slate-900">Sign in</h1>
      <p className="mt-2 text-slate-600">Access your Saypan Solutions account.</p>

      <button
        onClick={() => signIn("google", { callbackUrl: "/dashboard" })}
        className="mt-8 w-full rounded-lg bg-[#356DB5] px-4 py-3 text-white font-semibold hover:opacity-90"
      >
        Continue with Google
      </button>

      <div className="my-8 flex items-center gap-4">
        <div className="h-px flex-1 bg-slate-200" />
        <span className="text-sm text-slate-500">or</span>
        <div className="h-px flex-1 bg-slate-200" />
      </div>

      <div className="space-y-3">
        <input
          className="w-full rounded-lg border border-slate-300 px-3 py-2"
          placeholder="Email"
          type="email"
          value={email}
          onChange={(e) => setEmail(e.target.value)}
        />
        <input
          className="w-full rounded-lg border border-slate-300 px-3 py-2"
          placeholder="Password"
          type="password"
          value={password}
          onChange={(e) => setPassword(e.target.value)}
        />

        <button
          onClick={() =>
            signIn("credentials", {
              email,
              password,
              mode,
              callbackUrl: "/dashboard",
            })
          }
          className="w-full rounded-lg border border-slate-900 px-4 py-3 font-semibold"
        >
          {mode === "login" ? "Sign in" : "Create account"}
        </button>

        <button
          onClick={() => setMode(mode === "login" ? "signup" : "login")}
          className="w-full text-sm text-[#356DB5] underline underline-offset-4"
        >
          {mode === "login"
            ? "New here? Create an account"
            : "Already have an account? Sign in"}
        </button>
      </div>
    </div>
  );
}

3) Add NextAuth Provider

src/app/providers.tsx

"use client";
import { SessionProvider } from "next-auth/react";

export default function Providers({ children }: { children: React.ReactNode }) {
  return <SessionProvider>{children}</SessionProvider>;
}


Wrap in layout:

src/app/layout.tsx

import Providers from "./providers";

export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <html lang="en">
      <body>
        <Providers>{children}</Providers>
      </body>
    </html>
  );
}

4) Protect a page (example dashboard)

src/app/dashboard/page.tsx

import { getServerSession } from "next-auth";

export default async function Dashboard() {
  const session = await getServerSession();
  if (!session) {
    return (
      <div className="p-10">
        <a className="underline" href="/login">Go to login</a>
      </div>
    );
  }

  return <div className="p-10">Welcome, {session.user?.email}</div>;
}

5) Environment variables (required)

Add these in Azure Static Web Apps → Configuration (Application settings):

NEXTAUTH_URL = https://<your-site-domain>

NEXTAUTH_SECRET = random long string

GOOGLE_CLIENT_ID

GOOGLE_CLIENT_SECRET

And locally in .env.local.

Google setup

In Google Cloud Console:

Create OAuth Client ID (Web)

Authorized redirect URI:

https://<your-domain>/api/auth/callback/google

⚠️ Critical note about email/password

The “Credentials” provider must use a database (Supabase/Postgres/etc).
The quick in-memory version above is only to show flow.

If you want the best production setup

✅ Supabase Auth is the simplest:

Google login

Email/password signup

Password reset

Email verification

Hosted auth pages optional

Works great with Next.js and Azure SWA

If you say “use Supabase”, I’ll give you the exact steps + code to integrate it.

One quick question (so I don’t send you the wrong path)

Is your site deployed as:

Next.js (SSR) on Azure Static Web Apps, or

Static export (only HTML/CSS/JS, no server runtime)?

If you’re not sure: tell me your build output folder (out, dist, build) and I’ll infer it.

Either way, I can get login working — but the best method depends on that.  